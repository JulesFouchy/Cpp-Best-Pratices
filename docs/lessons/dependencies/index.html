<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Dependencies | C++ and Dev Practices</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://julesfouchy.github.io//Learn--Cpp-And-Dev-Practices/docs/lessons/dependencies"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Dependencies | C++ and Dev Practices"><meta data-react-helmet="true" name="description" content="Managing dependencies between the different parts of your application is probably the most difficult challenge as your codebase grows."><meta data-react-helmet="true" property="og:description" content="Managing dependencies between the different parts of your application is probably the most difficult challenge as your codebase grows."><link data-react-helmet="true" rel="shortcut icon" href="/Learn--Cpp-And-Dev-Practices/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://julesfouchy.github.io//Learn--Cpp-And-Dev-Practices/docs/lessons/dependencies"><link data-react-helmet="true" rel="alternate" href="https://julesfouchy.github.io//Learn--Cpp-And-Dev-Practices/docs/lessons/dependencies" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://julesfouchy.github.io//Learn--Cpp-And-Dev-Practices/docs/lessons/dependencies" hreflang="x-default"><link rel="stylesheet" href="/Learn--Cpp-And-Dev-Practices/assets/css/styles.08aee60e.css">
<link rel="preload" href="/Learn--Cpp-And-Dev-Practices/assets/js/runtime~main.9a304edb.js" as="script">
<link rel="preload" href="/Learn--Cpp-And-Dev-Practices/assets/js/main.d15340e9.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Learn--Cpp-And-Dev-Practices/"><img src="/Learn--Cpp-And-Dev-Practices/img/favicon-32x32.png" alt="Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/Learn--Cpp-And-Dev-Practices/img/favicon-32x32.png" alt="Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title"></b></a><a class="navbar__item navbar__link navbar__link--active" href="/Learn--Cpp-And-Dev-Practices/docs/lessons">Lessons</a><a class="navbar__item navbar__link" href="/Learn--Cpp-And-Dev-Practices/docs/students">Skills</a><a class="navbar__item navbar__link" href="/Learn--Cpp-And-Dev-Practices/docs/assignment">Assignment</a><a class="navbar__item navbar__link" href="/Learn--Cpp-And-Dev-Practices/resources">Resources</a><a class="navbar__item navbar__link" href="/Learn--Cpp-And-Dev-Practices/tools">Tools</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/JulesFouchy/Learn--Cpp-And-Dev-Practices/issues" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-issues-link" aria-label="GitHub issues"></a><a href="https://github.com/JulesFouchy/Learn--Cpp-And-Dev-Practices" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons">Introduction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/debugger">Use a debugger</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/use-an-ide">Use an IDE</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/vector">std::vector</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/use-git">Use Git</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/use-a-formatting-tool">Use a formatting tool</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/naming">Naming</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/split-problems-in-small-pieces">Split problems in small pieces</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/consistency-in-style">Consistency in style</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/documentation">Documentation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/make-it-work-then-make-it-good">Make it work, then make it good</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/stack-vs-heap">Stack vs Heap</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/write-small-functions">Write small functions</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/assert">assert and static_assert</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/auto">auto</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/enums">Enums</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/lambda">Lambda functions</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/optional">std::optional</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/string-and-string-view">string and string_view</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/const">const</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/stl-algorithms">STL algorithms</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/debug-vs-release">Debug vs Release</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/markdown">Markdown</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/range-based-for-loop">Range-based for loop</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/smart-pointers">Smart Pointers</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/cmake">CMake</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/cpp-casts">C++ casts</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/free-functions">Prefer free functions</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/static-analysis-and-sanitizers">Static analysis and Sanitizers</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/use-libraries">Use libraries</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/watch-conferences">Watch conferences</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/write-libraries">Write libraries</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/dear-imgui">Dear ImGui</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/designated_initializers">Designated Initializers</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/dont-repeat-yourself">DRY : Don&#x27;t repeat yourself</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/orthogonality">Orthogonality</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/testing">Testing</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/type-design">Type design</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/dependencies">Dependencies</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/single-source-of-truth">Single Source of Truth</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/strong-typing">Strong Typing</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/code-reviews">Code reviews</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/static-site-generators">Static site generators</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/submodules">Git submodules</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/composition-over-inheritance">Composition over Inheritance</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/deleted-functions">Deleted functions</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/immediately-invoked-lambda">Immediately Invoked Lambda</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/exceptions">Exceptions</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/git-pull-request">Pull requests</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/functional-programming">Functional programming</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/measuring-performance">Measuring performance</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/move-semantics">Move semantics</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/precompiled-header">Precompiled Header</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/state-and-strategy">State and Strategy</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/variant">std::variant</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/linked-list">Linked lists</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/multithreading">Multithreading</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/polymorphism">Polymorphism</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/trailing-return-type">Trailing return type</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/dead-code">Avoid dead code</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/against-nested-namespaces">Avoid nested namespaces</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/pointer-vs-reference">Pointers vs References</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/type-erasure">Type erasure</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/wasm-and-electron">wasm and electron</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/scope-guard">Scope guard</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/random">Random</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/rule-of-5">The Rule of 5</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/friend">friend</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/if-defined">#if defined()</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Dependencies</h1></header><p>Managing dependencies between the different parts of your application is probably the most difficult challenge as your codebase grows.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="the-singleton-attempt"></a>The Singleton attempt<a class="hash-link" href="#the-singleton-attempt" title="Direct link to heading">#</a></h2><p>One tempting solution is to resort to the <em>Singleton</em> (anti-)pattern. In its simplest form it consists in making your class static <sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup> so that anyone can access it from anywhere. It has the advantage that you don&#x27;t need to pass an instance around (which would probably require you to modify the signature of quite a few fonctions to pass the instance to the parts that need it). <strong>This makes the Singleton a really good solution <em>in the short term</em>.</strong></p><p>But the Singleton can end up causing a few problems, hence why most people have stopped using it :</p><ul><li><strong>It prevents you from having multiple instances of the same class</strong>. Obviously you are a reasonable person and you use a Singleton only for classes that you need one single instance of. . . But you might realize later that actually you need to have multiple instancies.
I have a few examples from my personal experience : <em>an history</em> seems like it is unique across the application, until you realize that having separate histories for separate systems is a useful feature. And the argument to rule them all : what if you want to have multiple instances of your application in parallel ? Then you can&#x27;t have any static data because it would be shared accross the instancies of your application. For example think of a workspace in a drawing application : you might want to have multiple drawings open at once, each with it&#x27;s own layer system, history, etc.</li><li><strong>It reduces testability</strong> : each class that depends on a static class cannot be used outside of the application. This is a big problem for testing (and also for reusing your code !). When testing we usually like to create fake instancies of the dependencies of a class to test that class. For example if you depend on a server, it is nice to make your tests with a mock server (for example that returns a dummy answer when you make a request, whithout even making a web call to a service) rather that the production one ! It prevents breaking things or even relying on having a server running. Also you can test different scenarios â€“ like the server beeing down â€“ whithout having to shut down your actual server !
This is also why you should depend on interfaces and never on concrete classes. If you depend on an <code>IServer</code> you can then have different test implementations : <code>MockServerRunning</code>, <code>MockServerDown</code>, <code>MockServerLaggy</code> etc.</li><li><strong>It hides dependencies</strong>. Even though it is a pain to write each dependency explicitly in the signature of functions, later down the road you will be happy to be able to see at a glance what is required for a given function (when refactoring for example). It will also be easier to reuse the code later in other projects if the only dependencies are at the function boundary (aka in the signature).</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="the-best-practices"></a>The best practices<a class="hash-link" href="#the-best-practices" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="dependency-injection"></a>Dependency Injection<a class="hash-link" href="#dependency-injection" title="Direct link to heading">#</a></h3><p>Yes, you should receive as parameters all the classes / systems that you depend on. Storing them as members isn&#x27;t the cleanest either in my opinion (this can be qualified though) ; <del>I would tend to only store a reference to a class if there is a very strong coupling between the two (like a <code>CameraController</code> and the corresponding <code>Camera</code>)</del> (EDIT : I would <strong>almost never</strong> store references because it makes copying and assigning pretty troublesome / impossible).</p><p>You should always send references as parameters to each function that needs them : it prevents you from introducing extra member variables, and makes it clearer which parts of your class actually need or act upon a dependency.</p><p>If you end up with too many arguments, maybe grouping them in a struct can be a good idea. This should be considered carefully though because it can lead to introducing unnecessary dependencies (if a class X needs 4 out of the 5 classes packaged in a struct Y, it can be tempting to make X depend on Y, although it will grab one unnecessary dependency, which is <em>bad</em>).</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="about-storing-a-reference-to-a-dependency"></a>About storing a reference to a dependency<a class="hash-link" href="#about-storing-a-reference-to-a-dependency" title="Direct link to heading">#</a></h4><p>Storing <em>a reference</em> is a problem because it makes your type more complex than it needs to be. I realized that after a 1 hour debugging session filled with cryptic template error messages.
Having a reference in your type will make it <strong>non-copy-assignable</strong> ! That is because when trying to assign to a refence, you are actually assigning to the object behind the reference ! You cannot modify where the reference points to after its creation !</p><p>Let&#x27;s have an example :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyClass</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Constructor</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">MyClass</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> MyDependency</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> my_dependency</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> _my_dependency</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">my_dependency</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// OK : initializes the reference to point to my_dependency</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Copy Constructor</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">MyClass</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> MyClass</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> o</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> _my_dependency</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">_my_dependency</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// OK : initializes the reference to point to o.my_dependency</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Copy Assignment operator</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    MyClass</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">operator</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> MyClass</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> o</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _my_dependency </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> o</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">_my_dependency</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Bad ! This doesn&#x27;t change where the reference is pointing to, but instead tries to modify the object that the reference points to ! Here this is a compile error because _my_dependency is a const&amp;, but if it was not const, that would be a silent bug modifying the object pointed to by _my_dependency!!!</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> MyDependency</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _my_dependency</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Here is a nice article about problems around references by Herb Sutter : <a href="https://herbsutter.com/2020/02/" target="_blank" rel="noopener noreferrer">https://herbsutter.com/2020/02/</a></p><p><strong>Also</strong> when you store a reference or a pointer, you must make sure that the pointed object outlives the class where the reference is stored ; otherwise you will get a dangling reference or pointer !
For example if your dependency lives in a <code>std::vector</code>, and the vector gets resized at some point, all the references to elements of that vector get invalidated ! If you stored one such reference, you are in trouble ! On the contrary if you pass a reference each frame, you will not notice the change of adress in memory at all.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="when-you-have-no-choice-but-to-store-the-dependency"></a>When you have no choice but to store the dependency<a class="hash-link" href="#when-you-have-no-choice-but-to-store-the-dependency" title="Direct link to heading">#</a></h4><p>An interesting exception to the <em>do not store your dependencies</em> rule is if you need your dependency in the destructor of your class (or in an operator like <code>+=</code>) : in those cases, you cannot pass any arguments ! Therefore you have no other choice but to store the dependency inside the class (or have it global but that would be even worse !)</p><p>In such cases<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup>, I would recommend storing a pointer rather than a reference (except if your type is non-copyable anyways) because pointers have the appropriate copy semantics for the cases where we store a reference to a &quot;global and unique&quot; dependency (aka for cases where we are not owning the pointed object).</p><p>One problem though is that pointers can be <code>nullptr</code> : if this isn&#x27;t desired you should consider using <code>gsl::not_null</code> from <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Ri-nullptr" target="_blank" rel="noopener noreferrer">the C++ Core Guidelines</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="dependency-inversion-the-d-of-solid"></a>Dependency Inversion (the D of SOLID)<a class="hash-link" href="#dependency-inversion-the-d-of-solid" title="Direct link to heading">#</a></h3><p>The interfaces should be owned by the high level that uses it, not by the low level that implements it.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="concepts-vs-interfaces"></a>Concepts vs Interfaces<a class="hash-link" href="#concepts-vs-interfaces" title="Direct link to heading">#</a></h2><p>Concepts are better than interfaces because they can also require the existance of free functions, not only methods.</p><p>For example if you want to require that each shape is drawable, with an interface it would require that <code>draw()</code> be a method of each <code>Shape</code> class. With concepts you can require that a free function <code>draw(Shape const auto&amp; shape)</code> exists for each type following the <code>Shape</code> concept. And free functions are great for many reasons ! (Single Responsibility Principle, Open-Close Principle, etc. See <a href="https://www.youtube.com/watch?v=WLDT1lDOsb4" target="_blank" rel="noopener noreferrer">Free your functions</a>)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="to-go-further"></a>To go further<a class="hash-link" href="#to-go-further" title="Direct link to heading">#</a></h2><p><a href="https://www.youtube.com/watch?v=K5c7uvWe_hw" target="_blank" rel="noopener noreferrer">About the Singleton and alternatives to it</a></p><p><a href="https://www.youtube.com/watch?v=Ntraj80qN2k" target="_blank" rel="noopener noreferrer">About SOLID by Klaus Iglberger</a></p><div class="footnotes"><hr><ol><li id="fn-1">Or rather have a static instance available through a <code>MyClass::get()</code> method, because it gives you control over the instanciation and destruction order, which is important when you have dependencies between your singletons, and when you use multithreading.<a href="#fnref-1" class="footnote-backref">â†©</a></li><li id="fn-2">I met such a case when creating wrapper classes for Vulkan resources : they need a reference to the device to be destructed, so I had to store a handle to the device in each wrapper class.<a href="#fnref-2" class="footnote-backref">â†©</a></li></ol></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/Learn--Cpp-And-Dev-Practices/docs/tags/architecture">Architecture</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/type-design"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Type design</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Learn--Cpp-And-Dev-Practices/docs/lessons/single-source-of-truth"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Single Source of Truth Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-singleton-attempt" class="table-of-contents__link">The Singleton attempt</a></li><li><a href="#the-best-practices" class="table-of-contents__link">The best practices</a><ul><li><a href="#dependency-injection" class="table-of-contents__link">Dependency Injection</a></li><li><a href="#dependency-inversion-the-d-of-solid" class="table-of-contents__link">Dependency Inversion (the D of SOLID)</a></li></ul></li><li><a href="#concepts-vs-interfaces" class="table-of-contents__link">Concepts vs Interfaces</a></li><li><a href="#to-go-further" class="table-of-contents__link">To go further</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Other classes</div><ul class="footer__items"><li class="footer__item"><a href="https://julesfouchy.github.io/Learn--Generative-Art" target="_blank" rel="noopener noreferrer" class="footer__link-item">Generative Art</a></li><li class="footer__item"><a href="https://julesfouchy.github.io/Learn--Math-for-Art-and-Computer-Graphics" target="_blank" rel="noopener noreferrer" class="footer__link-item">Math for Art and Computer Graphics</a></li></ul></div><div class="col footer__col"><div class="footer__title">Raise an issue !</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/JulesFouchy/Learn--Cpp-And-Dev-Practices/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Ask a question</a></li><li class="footer__item"><a href="https://github.com/JulesFouchy/Learn--Cpp-And-Dev-Practices/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Report a mistake</a></li><li class="footer__item"><a href="https://github.com/JulesFouchy/Learn--Cpp-And-Dev-Practices/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Give me feedback</a></li></ul></div><div class="col footer__col"><div class="footer__title">Contact Me</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.com/users/372812330742054914" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="mailto:jules.fouchy@ntymail.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">E-Mail</a></li><li class="footer__item"><a href="https://github.com/JulesFouchy" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021. Built with <a href="https://docusaurus.io/">Docusaurus</a>.
              <div>Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>
              </div></div></div></footer></div>
<script src="/Learn--Cpp-And-Dev-Practices/assets/js/runtime~main.9a304edb.js"></script>
<script src="/Learn--Cpp-And-Dev-Practices/assets/js/main.d15340e9.js"></script>
</body>
</html>