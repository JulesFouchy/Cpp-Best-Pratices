Minimize dependencies.

Also, std::function can help when you are depending of a function instead of some data!